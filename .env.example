# =============================================================================
# Smartacus - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# =============================================================================

# =============================================================================
# Keepa API Configuration
# =============================================================================

# Your Keepa API key (required)
# Get it from: https://keepa.com/#!api
KEEPA_API_KEY=your_keepa_api_key_here

# Rate limiting - tokens per minute (Plan 49 EUR ~= 300 tokens/min)
# Conservative default to avoid hitting limits
KEEPA_TOKENS_PER_MINUTE=200

# Maximum retry attempts for failed requests
KEEPA_MAX_RETRIES=3

# Retry delay settings (seconds)
KEEPA_RETRY_BASE_DELAY=1.0
KEEPA_RETRY_MAX_DELAY=60.0

# Request timeout in seconds
KEEPA_REQUEST_TIMEOUT=120

# Amazon marketplace domain ID
# 1=com, 2=co.uk, 3=de, 4=fr, 5=co.jp, 6=ca, 7=cn, 8=it, 9=es, 10=in, 11=com.mx
KEEPA_DOMAIN_ID=1

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection settings
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=smartacus
DATABASE_USER=smartacus_app
DATABASE_PASSWORD=your_secure_password_here

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# Connection timeout in seconds
DATABASE_CONNECT_TIMEOUT=10

# SSL mode: disable, allow, prefer, require, verify-ca, verify-full
DATABASE_SSL_MODE=prefer

# =============================================================================
# Ingestion Pipeline Configuration
# =============================================================================

# ASIN batch size for API requests (max 100 for Keepa)
INGESTION_BATCH_SIZE=100

# Target Amazon category node ID
# 7072562011 = Cell Phone Automobile Cradles (Car Phone Mounts)
INGESTION_CATEGORY_NODE_ID=7072562011

# ASIN filtering criteria
INGESTION_MIN_PRICE=5.0
INGESTION_MAX_PRICE=100.0
INGESTION_MIN_REVIEWS=10
INGESTION_MIN_RATING=3.0
INGESTION_MAX_BSR=500000

# Target number of ASINs to track
INGESTION_TARGET_ASIN_COUNT=10000

# Number of parallel workers for processing
INGESTION_PARALLEL_WORKERS=4

# Include BuyBox history in data fetch
INGESTION_ENABLE_BUYBOX=true

# Data freshness threshold - skip ASINs updated within this many hours
INGESTION_FRESHNESS_HOURS=24

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format (Python logging format string)
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Log file path (optional, logs to console if not set)
# LOG_FILE=/var/log/smartacus/ingestion.log

# Enable JSON structured logging
LOG_JSON=false

# =============================================================================
# Application Settings
# =============================================================================

# Environment: development, staging, production
ENVIRONMENT=development
